package com.pic;
import android.app.*;
import android.os.*;
import android.content.*;
import android.widget.*;
import android.view.*;

public class SetActivity extends Activity
{
    SharedPreferences sharedPreferences;//数据持久化
    EditText bao_ming ,bian_ju_u,bian_ju_l;
    void log(String str){Toast.makeText(this,str,Toast.LENGTH_LONG).show();}
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.set); 
        sharedPreferences= getSharedPreferences("test",Activity.MODE_PRIVATE); //实例化SharedPreferences对象（第一步） 
        bao_ming = (EditText) this.findViewById(R.id.da_yin_bao_ming);//得到输入框
        bian_ju_u = (EditText) this.findViewById(R.id.yi_cun_u);//得到输入框
        bian_ju_l = (EditText) this.findViewById(R.id.yi_cun_l);//得到输入框
        bao_ming.setText(sharedPreferences.getString("Bao_Name", "epson.print"));
        //int bian_ju_u =sharedPreferences.getInt("Bian_Ju_U",0); 
        //int bian_ju_l =sharedPreferences.getInt("Bian_Ju_L",0);
        
    }
    public void set(View view)
    {
        SharedPreferences.Editor editor = sharedPreferences.edit(); //实例化SharedPreferences.Editor对象（第二步）
        editor.putString("Bao_Name", bao_ming.getText().toString()); //把输入框的值用putString的方法保存数据 
        editor.putInt("Bian_Ju_U",Integer.parseInt(bian_ju_u.getText().toString())); //把输入框的值用putString的方法保存数据 
        editor.putInt("Bian_Ju_L",Integer.parseInt(bian_ju_l.getText().toString())); //把输入框的值用putString的方法保存数据 
        editor.commit(); //提交当前数据 
        log("已提交");
    }
    public void get(View view)
    {
        sharedPreferences= getSharedPreferences("test",Activity.MODE_PRIVATE); //同样，在读取SharedPreferences数据前要实例化出一个SharedPreferences对象 
        String name =sharedPreferences.getString("Bao_Name", ""); // 使用getString方法获得value，注意第2个参数是value的默认值 
        int bian_ju_u =sharedPreferences.getInt("Bian_Ju_U",0); 
        int bian_ju_l =sharedPreferences.getInt("Bian_Ju_L",0);
        log("读取到的属性为"+"\n"+"打印机驱动包名：" + name + "\n" + "上边距："+bian_ju_u+"\n"+"左边距："+bian_ju_l);
    }
}
